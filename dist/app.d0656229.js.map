{"version":3,"sources":["types.ts","member-editor.ts","components/CrewEditorItem.ts","crew-editor.ts","components/CrewDisplayItem.ts","crew-display.ts","app.ts"],"names":[],"mappings":"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","file":"app.d0656229.js","sourceRoot":"../src","sourcesContent":["/**\n * A Gender \"TYPE\", can only be \"M\" or \"F\"\n */\ntype Gender = \"M\" | \"F\";\n\n/**\n * An Age Group Type, can be expanded later but for now only supports secondary school rowing\n * \n * Other clubs use \"age\" groups such as\n * \t-\tIntermediate\n * \t- \tU19\n * \t-\tU21\n * \t-\tChampion (yes thats a thing)\n */\ntype AgeGroup = \"U15\" | \"U16\" | \"U17\" | \"U18\";\n\ntype BoatSize = 1 | 2 | 4 | 8 | 0;\n\n//#region CrewMemberEditor\n\n/**\n * The Main Crew Member Class, used by multiple file as a common dependency, allows for consistency between pages\n */\nclass CrewMember {\n\tid!: number;\n\tname!: string;\n\tgender!: Gender;\n\tageGroup!: AgeGroup;\n\tnovice!: boolean;\n\n\tpublic constructor(i: CrewMemberInterface);\n\tpublic constructor(id: number, name: string, gender: Gender, ageGroup: AgeGroup, novice: boolean);\n\tpublic constructor(...args: any[]) {\n\t\tif (args.length == 1) {\n\t\t\tthis.fromInterface(args[0]);\n\t\t}\n\t\telse if (args.length == 5) {\n\t\t\tthis.fromValues(args[0], args[1], args[2], args[3], args[4]);\n\t\t} else {\n\t\t\tthrow new Error(\"Crew Member incorrectly initialised\");\n\t\t}\n\t}\n\n\tprivate fromInterface(i: CrewMemberInterface) {\n\t\tthis.id = i.id!;\n\t\tthis.name = i.name!;\n\t\tthis.gender = i.gender as Gender;\n\t\tthis.novice = i.novice!;\n\t\tthis.ageGroup = i.ageGroup as AgeGroup;\n\t}\n\n\tprivate fromValues(id: number, name: string, gender: Gender, ageGroup: AgeGroup, novice: boolean) {\n\t\tthis.id = id;\n\t\tthis.name = name;\n\t\tthis.gender = gender;\n\t\tthis.novice = novice;\n\t\tthis.ageGroup = ageGroup;\n\t}\n\n}\n\n/**\n * An Interface for the CrewMember Class, it is possible to create a Crew Member from this interface\n * \n * the solution looks a bit scuffed but it is literally in the documentation for typescript to go off i guess\n */\ninterface CrewMemberInterface {\n\tid?: number | undefined;\n\tname?: string | undefined;\n\tgender?: Gender | string;\n\tageGroup?: AgeGroup | string;\n\tnovice?: boolean | undefined;\n}\n\n//#endregion\n\n\nexport { CrewMember, CrewMemberInterface, Gender, AgeGroup, BoatSize }","import { AgeGroup, CrewMember, CrewMemberInterface, Gender } from \"./types\";\n\ntype Validation = \"name\" | \"gender\" | \"ageGroup\" | undefined;\n\n\nclass MemberEditor {\n\tmainPoint: HTMLElement;\n\n\ttable: HTMLTableElement;\n\tviewer: HTMLElement;\n\teditor: HTMLElement;\n\n\tindex: number | null;\n\n\tname: HTMLInputElement;\n\t// _name: string;\n\n\tageGroupSelect: HTMLSelectElement;\n\t// _ageGroup: AgeGroup;\n\n\tgenderSelect: HTMLSelectElement;\n\t// buffer.gender: Gender;\n\n\tnoviceSwitch: HTMLInputElement;\n\t// _novice: boolean;\n\n\tclearButton: HTMLButtonElement;\n\n\tsubmitButton: HTMLButtonElement;\n\n\t_val: Validation;\n\n\tbuffer!: CrewMemberInterface;\n\n\tdata!: CrewMember[];\n\n\tprivate testAgeGroups = [\"U15\", \"U16\", \"U17\", \"U18\"]\n\n\t/**\n\t * Create a randomly generated ascii string, good for getting test data\n\t * \n\t * @param length Length of the string wanted\n\t * @returns A Random string of ascii text\n\t */\n\tprivate testRandomNameGenerator(length: number) {\n\t\treturn Math.random().toString(36).substr(2, length);\n\t}\n\n\t// public update() {\n\t// \tthis.load();\n\t// \tthis.insertDataIntoTable();\n\t// \tthis.updateViewer();\n\t// }\n\n\tconstructor(querySelector: string) {\n\n\t\tthis.index = -1;\n\n\t\tthis.buffer = {\n\t\t\tid: -1,\n\t\t\tname: \"\",\n\t\t\tgender: \"\",\n\t\t\tageGroup: \"\",\n\t\t\tnovice: undefined\n\t\t}\n\t\t// main point of the element\n\t\t// prevents clashes between tabs, as long as i use this in place of `document`;\n\t\ttry {\n\t\t\tthis.mainPoint = document.querySelector(querySelector)!;\n\t\t} catch (error) {\n\t\t\tthrow new Error(\"Member Editor: MainPoint not found\");\n\t\t}\n\n\t\t// Get all of the elements\n\t\ttry {\n\t\t\tthis.table = this.mainPoint.querySelector(\"table\")!;\n\t\t\tthis.editor = this.mainPoint.querySelector('.editor')!;\n\t\t\tthis.viewer = this.mainPoint.querySelector('.viewer')!;\n\n\t\t\tthis.name = this.editor.querySelector(\"input.nameInput\")!;\n\t\t\tthis.name.addEventListener('input', () => {\n\t\t\t\tthis.buffer.name = (this.name.value);\n\t\t\t\tthis.updateViewer();\n\t\t\t});\n\n\t\t\tthis.ageGroupSelect = this.editor.querySelector(\"select.age-group\")!;\n\t\t\tthis.ageGroupSelect.addEventListener('input', () => {\n\t\t\t\tthis.buffer.ageGroup = this.ageGroupSelect.value as AgeGroup;\n\t\t\t\tthis.updateViewer();\n\t\t\t});\n\n\t\t\tthis.genderSelect = this.editor.querySelector(\"select.gender\")!;\n\t\t\tthis.genderSelect.addEventListener('input', () => {\n\t\t\t\tthis.buffer.gender = this.genderSelect.value as Gender;\n\t\t\t\tthis.updateViewer();\n\t\t\t});\n\n\t\t\tthis.noviceSwitch = this.editor.querySelector(\".novice\")!;\n\t\t\tthis.noviceSwitch.addEventListener('change', () => {\n\t\t\t\tthis.buffer.novice = this.noviceSwitch.checked;\n\t\t\t\tthis.updateViewer();\n\t\t\t});\n\n\t\t\tthis.clearButton = this.editor.querySelector(\".buttons button.clear\")!;\n\t\t\tthis.clearButton.addEventListener('mouseup', () => {\n\t\t\t\t// this.buffer = {};\n\t\t\t\tthis.resetBuffer();\n\t\t\t\tthis.updateInputForm();\n\t\t\t\tthis.updateViewer();\n\t\t\t});\n\n\t\t\tthis.submitButton = this.editor.querySelector(\".buttons button.submit\")!;\n\t\t\tthis.submitButton.addEventListener('mouseup', () => {\n\t\t\t\tif (!this.confirmAndSubmitDataFromForm()) {\n\t\t\t\t\talert(\"There was an error: \" + this._val);\n\t\t\t\t}\n\t\t\t\t// this.buffer = {};\n\t\t\t\t// this.resetBuffer();\n\t\t\t\t// this.updateViewer();\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tthrow new Error(\"Member Editor: Element(s) missing\");\n\t\t}\n\n\t\ttry {\n\t\t\tif (window.localStorage.getItem('crewMembers') == null) {\n\t\t\t\t// this.initTestData();\t\n\t\t\t\tthis.data = [];\n\t\t\t\tthis.save();\n\t\t\t} else {\n\t\t\t\tthis.load();\n\t\t\t}\n\n\t\t\tthis.sort(this.data);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthrow new Error(\"Member Editor: Failed when loading stuff or getting test data\");\n\t\t}\n\n\t\t// this.initTestData();\n\n\t\tthis.insertDataIntoTable();\n\n\t\tthis.updateViewer();\n\n\t\tconsole.info(\"Member Editor: Initialised Successfully\");\n\t\t// } catch (e) {\n\t\t// \tthrow new Error(\"Member Editor: \" + e);\n\t\t// }\n\t}\n\n\t/**\n\t * Dump the buffere element to the console\n\t */\n\tprivate dumpBuffer() {\n\t\tconsole.warn(\"CURRENT BUFFER IN MEMBER EDITOR\", this.buffer);\n\t}\n\n\t/**\n\t * Checks if the ID is in use\n\t * \n\t * @param id The ID to be checked\n\t * @returns true if the id is in use\n\t */\n\tprivate idIsUsedforCrewMember(id: number): boolean {\n\n\t\tlet tmp: boolean = false;\n\n\t\tfor (let i: number = 0; i < this.data.length; i++) {\n\t\t\tif (this.data[i].id == id) {\n\t\t\t\ttmp = true\n\t\t\t}\n\t\t}\n\n\t\treturn tmp;\n\t}\n\n\t/**\n\t * Give the editor buttons their functionality, uses events in order to wait for clicking\n\t */\n\tprivate setupButtons() {\n\t\tthis.mainPoint.querySelectorAll(\".actions\").forEach((val: Element) => {\n\t\t\tval.querySelectorAll('button').forEach((button: HTMLButtonElement) => {\n\t\t\t\tif (button.classList.contains('edit')) {\n\t\t\t\t\tbutton.addEventListener('click', () => {\n\n\t\t\t\t\t\tthis.dumpBuffer();\n\n\t\t\t\t\t\tthis.buffer.id = +button.getAttribute(\"data-id\")!;\n\t\t\t\t\t\tthis.pushInputToBuffer();\n\n\t\t\t\t\t\tthis.loadDataIntoInputForm(\n\t\t\t\t\t\t\t// Welcome to casting strings to numbers in typescript\n\t\t\t\t\t\t\t+button.getAttribute('data-index')!\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.dumpBuffer();\n\t\t\t\t\t});\n\t\t\t\t} else if (button.classList.contains('delete')) {\n\t\t\t\t\t// this.buffer = {};\n\t\t\t\t\tthis.resetBuffer();\n\t\t\t\t\tthis.updateInputForm();\n\n\t\t\t\t\tbutton.addEventListener('click', () => {\n\n\t\t\t\t\t\tlet tmp: CrewMember = this.data[+button.getAttribute('data-index')!];\n\n\t\t\t\t\t\tif (confirm('are you sure you\\'d like to delete ' + (tmp.name))) {\n\t\t\t\t\t\t\tthis.data.splice(+button.getAttribute('data-index')!, 1);\n\n\t\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\t\tthis.insertDataIntoTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t}\n\n\t/**\n\t * Verifies and Validates the buffer, which is synced with the inputs, so this serves as a form of input validation\n\t * @returns true if the contents of the buffer and be considered a valid CrewMember Object\n\t */\n\tprivate validateBuffer(): boolean {\n\t\tif (this.buffer.name == \"\" || this.buffer.name == undefined || this.buffer.name == null) {\n\t\t\tthis._val = 'name'\n\t\t\tthis.dumpBuffer();\n\t\t\treturn false\n\t\t};\n\t\tif (!(this.buffer.ageGroup as AgeGroup)) {\n\t\t\tthis._val = 'ageGroup';\n\t\t\tthis.dumpBuffer();\n\t\t\treturn false\n\t\t};\n\t\tif (!(this.buffer.gender == \"M\" || this.buffer.gender == \"F\")) {\n\t\t\tthis._val = 'gender';\n\t\t\tthis.dumpBuffer();\n\t\t\treturn false\n\t\t};\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Updates the viewer element with the latest data from the buffer\n\t */\n\tprivate updateViewer() {\n\t\t// this.dumpBuffer();\n\t\tthis.viewer.innerHTML = (\n\t\t\t(!!this.buffer.gender ? this.buffer.gender : 'Gender') +\n\t\t\t\" | \" +\n\t\t\t(!!this.buffer.ageGroup ? this.buffer.ageGroup : 'Age Group') +\n\t\t\t' ' +\n\t\t\t(this.buffer.novice ? 'Novice' : '') +\n\t\t\t' | ' +\n\t\t\t(!!this.buffer.name ? this.buffer.name : 'Name'));\n\t}\n\n\t/**\n\t * loads the data of a crew member from the data array into the buffer\n\t * \n\t * @param index index of a CrewMember object in the data array\n\t */\n\tprivate loadDataIntoInputForm(index: number) {\n\t\tthis.buffer.id = this.data[index].id;\n\t\tthis.name.value = (this.data[index].name);\n\t\tthis.noviceSwitch.checked = this.data[index].novice;\n\t\tthis.ageGroupSelect.value = (this.data[index].ageGroup);\n\t\tthis.genderSelect.value = (this.data[index].gender);\n\t\t// this.\n\n\t\tthis.pushInputToBuffer();\n\t\tthis.submitButton.innerHTML = `Update`\n\t}\n\n\t/**\n\t * Sets the buffer to its default 0 value\n\t */\n\tprivate resetBuffer() {\n\t\tthis.buffer.name = \"\";\n\t\tthis.buffer.ageGroup = \"\";\n\t\tthis.buffer.gender = \"\";\n\t\tthis.buffer.id = -1;\n\t\tthis.buffer.novice = false;\n\n\t\tthis.updateInputForm();\n\t\tthis.updateViewer();\n\t}\n\n\t/**\n\t * Pushes the buffer to the UI Form\n\t */\n\tprivate updateInputForm() {\n\n\t\t// this.dumpBuffer();\n\n\t\tthis.name.value = !!this.buffer.name ? this.buffer.name : \"\";\n\t\tthis.ageGroupSelect.value = !!this.buffer.ageGroup ? this.buffer.ageGroup : \"\";\n\t\tthis.genderSelect.value = !!this.buffer.gender ? this.buffer.gender : \"\";\n\t\tthis.noviceSwitch.checked = this.buffer.novice ? this.buffer.novice : false;\n\t}\n\n\t/**\n\t * Creates test data, uses the random name generator from above\n\t */\n\tprivate initTestData() {\n\t\tthis.data = [];\n\n\t\tconst amountOfData = 100;\n\n\t\tfor (var i: number = 0; i < amountOfData; i++) {\n\t\t\tthis.addCrewMember({\n\t\t\t\tname: this.testRandomNameGenerator(Math.floor(Math.random() * 7) + 5),\n\t\t\t\tgender: (!!(Math.round(Math.random())) ? \"M\" : \"F\") as Gender,\n\t\t\t\tageGroup: this.testAgeGroups[(Math.floor(Math.random() * 4))] as AgeGroup,\n\t\t\t\tnovice: !!(Math.round(Math.random())),\n\t\t\t\tid: this.createUID()\n\t\t\t});\n\t\t}\n\n\t\t// console.info(this.data);\n\t}\n\n\tprivate pushInputToBuffer() {\n\t\tthis.buffer.name = this.name.value;\n\t\tthis.buffer.ageGroup = this.ageGroupSelect.value as AgeGroup;\n\t\tthis.buffer.gender = this.genderSelect.value as Gender;\n\t\tthis.buffer.novice = this.noviceSwitch.checked;\n\t}\n\n\t/**\n\t * Returns the index in this.data of an element with the specified id\n\t * \n\t * @param id The id of the element you'd like to find the index of\n\t * @returns the index in this.data of the element with the id or `undefined` if not found\n\t */\n\tprivate getIndexOfID(id: number): number | null {\n\t\tlet i: number = -1;\n\n\t\tif (id < 0) return null;\n\n\t\tthis.data.some((val: CrewMember, index: number) => {\n\t\t\tif (val.id == id) {\n\t\t\t\ti = index;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t})\n\n\t\treturn i;\n\t}\n\n\tcreateUID(): number {\n\t\tlet ids: number[] = [];\n\t\tlet valid: boolean = false;\n\t\tlet i = 0;\n\n\t\tthis.data.forEach((val: CrewMember) => {\n\t\t\tids.push(val.id);\n\t\t});\n\n\t\twhile (!valid) {\n\t\t\ti++;\n\n\t\t\tif (!ids.includes(i)) valid = true;\n\t\t}\n\n\t\treturn i;\n\t}\n\n\t/**\n\t * Validates the data in the buffer and adds it to the data array, immediately saving the data array to window.localStorage\n\t * the updates the UI with the latest changes\n\t * \n\t * @returns true if the submition of the data was successful, otherwise the problem will be pushed to this._val\n\t */\n\tprivate confirmAndSubmitDataFromForm(): boolean {\n\t\tif (!this.validateBuffer()) {\n\t\t\tconsole.error(\"Error In \", this._val);\n\t\t\tthis.dumpBuffer();\n\t\t\treturn false;\n\t\t}\n\t\tif (this.buffer.id! == -1) {\n\n\t\t\tif (!confirm(`Are you sure that you'd like to add ${this.buffer.gender} ${this.buffer.ageGroup}${this.buffer.novice ? \" Novice\" : \"\"} named ${this.buffer.name}`)) return false;\n\n\t\t\tthis.buffer.id = this.createUID();\n\n\t\t\tthis.buffer.novice = this.buffer.novice ? true : false;\n\n\t\t\t// this.buffer.id = -1;\n\t\t\tthis.addCrewMember(this.buffer);\n\n\t\t\tthis.save();\n\t\t} else {\n\n\t\t\tif (!confirm(`Are you sure that you'd like to update ${this.buffer.gender} ${this.buffer.ageGroup}${this.buffer.novice ? \" Novice\" : \"\"} named ${this.buffer.name}`)) return false;\n\n\t\t\tlet index = this.getIndexOfID(this.buffer.id!);\n\n\t\t\tthis.data[index!] = new CrewMember(this.buffer);\n\n\t\t\tthis.save();\n\t\t}\n\n\t\tthis.submitButton.innerHTML = `Save`;\n\n\t\tthis.insertDataIntoTable();\n\t\treturn true\n\n\n\t}\n\n\t/**\n\t * \n\t * Pushes the supplied crew member to the data array object and saves it\n\t * \n\t * @param member the member to be added\n\t */\n\tprivate addCrewMember(member: CrewMemberInterface) {\n\t\tif (this.idIsUsedforCrewMember(member.id!)) {\n\t\t\tthis.data[this.getIndexOfID(member.id!)!] = new CrewMember(member);\n\t\t} else {\n\t\t\tthis.data.push(new CrewMember(member));\n\t\t}\n\n\t\tthis.save();\n\t}\n\n\tprivate sort(list: CrewMember[]) {\n\n\t\tif (!list) return;\n\t\tif (list.length == 0 || list.length == 1) return;\n\n\t\tlet ageGroups = [\"U15\", \"U16\", \"U17\", \"U18\"];\n\n\t\tlist.sort((a: CrewMember, b: CrewMember) => {\n\t\t\tif (a.gender == \"M\" && b.gender == \"F\") return -1;\n\t\t\tif (a.gender == \"F\" && b.gender == \"M\") return 1;\n\t\t\tif (a.gender == b.gender) return 0;\n\t\t});\n\n\t\tlist.sort((a: CrewMember, b: CrewMember) => {\n\t\t\tif (a.novice && !b.novice) return 1;\n\t\t\tif (!a.novice && b.novice) return -1;\n\t\t\treturn 0;\n\t\t});\n\n\t\tlist.sort((a: CrewMember, b: CrewMember) => {\n\t\t\treturn ageGroups.indexOf(b.ageGroup) - ageGroups.indexOf(a.ageGroup);\n\t\t});\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Saves the data object array to window.localStorage by base64 encoding it after it has been srtringified\n\t * \n\t * allows for persistent data usage\n\t */\n\tsave() {\n\t\tthis.sort(this.data);\n\n\t\tlocalStorage.setItem(\"crewMembers\", btoa(JSON.stringify(this.data)));\n\n\t\twindow.dispatchEvent(new Event(\"crewMembersEdited\"));\n\t}\n\n\t/**\n\t * Loads the data from window.localStorage into the data array\n\t * \n\t * if there is no data to load, it initialises the data array to an empty array\n\t */\n\tload() {\n\t\t// if (localStorage.getItem('crewMembers') != null) {\n\t\t// \tthis.data = JSON.parse(atob(localStorage.getItem('crewMembers')!));\n\t\t// } else {\n\t\t// \tthis.data = [];\n\t\t// }\n\n\t\t// // console.log(this.data);\n\n\t\t// this.save();\n\n\t\tlet xhr = new XMLHttpRequest();\n\n\t\txhr.onreadystatechange = () => {\n\t\t\tif (xhr.readyState == 4 && xhr.status == 200) {\n\n\t\t\t}\n\t\t}\n\n\t\txhr.open(\"GET\", \"/api/\");\n\t}\n\n\t/**\n\t * Updates the table with the up to date information by deleting all of the rows and adding the new ones in, \n\t * it isnt the most efficient way to do it but it works\n\t */\n\tinsertDataIntoTable() {\n\t\tthis.clearTable();\n\n\t\tif (this.data == [] || this.data == undefined) return;\n\n\t\tthis.data.forEach((val: CrewMember, i: number) => {\n\t\t\tlet row = this.table.insertRow();\n\n\t\t\trow.innerHTML = (`\n\t\t\t\t<td>${(val.gender)}</td>\n\t\t\t\t<td>${(val.ageGroup)} ${val.novice ? \"Novice\" : \"\"}</td>\n\t\t\t\t<td class=\"big\">${(val.name)}</td>\n\t\t\t\t<td class=\"actions\">\n\t\t\t\t\t<button class=\"edit material-icons\" data-index=\"${i}\" data-id=\"${val.id}\">edit</button>\n\t\t\t\t\t<button class=\"delete material-icons\" data-index=\"${i}\" data-id=\"${val.id}\">delete</button>\n\t\t\t\t</td>\n\t\t\t\n\t\t\t`);\n\t\t});\n\n\t\t// calls setup buttons afterwards to make the edit and delete buttons work\n\t\tthis.setupButtons();\n\t}\n\n\tclearTable() {\n\t\tthis.table.innerHTML = `\n\t\t\t<tr class=\"header\">\n\t\t\t\t<th>Gender</th>\n\t\t\t\t<th>Age Group</th>\n\t\t\t\t<th class=\"big\">Name</th>\n\t\t\t\t<th>Actions</th>\n\t\t\t</tr>\n\t\t`;\n\t}\n}\n\nexport { MemberEditor }","import { AgeGroup, BoatSize, CrewMember, Gender } from '../types';\n\n/**\n * Config Interface\n */\ninterface CrewEditorItemConfig {\n\tsize: BoatSize;\n\tcoxed: boolean;\n}\n\n// Warnings and Errors\n// The Editor will refuse to save until all errors are cleared, but it will accept the data if there is just a warning;\n// The Warnings just prevent coaches from accidental mistakes but sometimes mixed crews do happen during trainings so the crew will still save if this is the case\ntype currentErrorInEditor =\n\t| 'Not All Seats Filled'\n\t| 'No Coach'\n\t| 'No Crew Name'\n\t| 'Invalid Name'\n\t| 'No Oars'\n\t| 'No Boat Allocated'\n\t| 'Crew Type does not match size';\ntype currentWarningInEditor =\n\t| 'Mixed Age Groups Detected'\n\t| 'Mixed Genders Selected'\n\t| 'Non-Novices in Novice Boat';\n\n/**\n * \tSerialised form of the Crew Editor Item class, holds only the data we need\n *\n * \t We can use the length of the seats array to infer the boat type, based on it length\n *\n *\t |\t1 - 1x \t\t\t|\n *\t |\t2 - 2x / 2- \t|\n *\t |\t4 - 4x- / 4- \t|\n *\t |\t5 - 4x+ / 4+ \t|\n *\t |\t8 - 8x+ / 8+ \t|\n *\n *\t this is all the possible combinations and it is not required in this\n *\t software to differentiate between sculling and sweeping\n */\ninterface CrewEditorSerialised {\n\tseats: CrewMember[];\n\tboatName: string;\n\tcoachName: string;\n\toars: string;\n\tcrewType: string;\n}\n\nclass CrewEditorItem {\n\t/**\n\t * A Reference to this Item\n\t */\n\tmasterElement: HTMLElement;\n\n\t/**\n\t * A Reference to the editor element, given by the parent class (Crew Editor)\n\t */\n\tparentElement: HTMLElement;\n\n\tcoachName: string = '';\n\t_coachNameInput: HTMLInputElement;\n\n\tcrewName: string = '';\n\t_crewNameInput: HTMLInputElement;\n\n\tboatName: string = '';\n\t_boatNameInput: HTMLInputElement;\n\n\toars: string = '';\n\t_oarsInput: HTMLInputElement;\n\n\terrorBox: HTMLElement;\n\n\tdeleteButton: HTMLElement;\n\n\tseatCount: BoatSize = 0;\n\tcoxed: boolean;\n\n\t/**\n\t * Yet To IMPLEMENT\n\t * TODO: Implement this BS\n\t */\n\tcurrentError: currentErrorInEditor | undefined = undefined;\n\tcurrentWarning: currentWarningInEditor | undefined = undefined;\n\n\t/**\n\t * Seats, this thing has cause a LOT of problems but its fixed now\n\t */\n\tseats: CrewMember[];\n\n\t/**\n\t * MULTIPLE CONSTRUCTORS GANG\n\t */\n\n\tconstructor({ parent: HTMLElement, config: CrewEditorItemConfig });\n\tconstructor({ parent: HTMLElement, serialisedForm: CrewEditorSerialised });\n\n\t/**\n\t *\n\t * @param args The Arguments, can be one of 2 overflows\n\t */\n\tconstructor(args: any) {\n\t\tif (args.serialisedForm) {\n\t\t\tthis.parentElement = args.parent;\n\t\t\tthis.deserialise(args.serialisedForm);\n\t\t} else if (args.config) {\n\t\t\tthis.fromParentAndConfig(args.parent, args.config);\n\t\t} else {\n\t\t\tconsole.error('Unable to Construct Crew Member Editor');\n\t\t}\n\t}\n\n\t/**\n\t * Tells the parent (Crew Editor Class) to save the crews,\n\t * this happens a lot as this is saved in real time\n\t */\n\tprivate save() {\n\t\tthis.parentElement.dispatchEvent(new Event('save'));\n\t}\n\n\t/**\n\t * This is when the CrewEditorItem is brand new, it sets everything up\n\t *\n\t * @param parent parent element, probably not actually needed\n\t * @param config The Config such as crew Size and whether or not there is a cox\n\t */\n\tprivate fromParentAndConfig(\n\t\tparent: HTMLElement,\n\t\tconfig: CrewEditorItemConfig\n\t) {\n\t\tthis.masterElement = document.createElement('div');\n\n\t\tthis.parentElement = parent;\n\n\t\tthis.seatCount = config.size;\n\t\tthis.coxed = config.coxed;\n\n\t\tthis.seats = new Array<CrewMember>(\n\t\t\tthis.seatCount + (this.coxed ? 1 : 0)\n\t\t);\n\n\t\tthis.seats.fill(undefined);\n\t}\n\n\t/**\n\t * \tThis is when the CrewEditorItem is being loaded as a result of the window.localStorage being existant for this\n\t *\n\t * @param serialisedForm the Simplified form of this thing, used for more efficient storage\n\t */\n\tprivate deserialise(serialisedForm: CrewEditorSerialised): void {\n\t\tthis.masterElement = document.createElement('div');\n\n\t\t// We are inferring the seat count and cox from the length of the serialised form;\n\t\tswitch (serialisedForm.seats.length) {\n\t\t\tcase 1:\n\t\t\t\tthis.seatCount = 1;\n\t\t\t\tthis.coxed = false;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.seatCount = 2;\n\t\t\t\tthis.coxed = false;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis.seatCount = 4;\n\t\t\t\tthis.coxed = false;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.seatCount = 4;\n\t\t\t\tthis.coxed = true;\n\t\t\t\tbreak;\n\t\t\tcase 9:\n\t\t\t\tthis.seatCount = 8;\n\t\t\t\tthis.coxed = true;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.seats = serialisedForm.seats;\n\n\t\tthis.boatName = serialisedForm.boatName;\n\t\t// this._boatNameInput.value = serialisedForm.boatName;\n\n\t\tthis.crewName = serialisedForm.crewType;\n\t\t// this._crewNameInput.value = serialisedForm.crewType;\n\n\t\tthis.oars = serialisedForm.oars;\n\t\t// this._oarsInput.value = serialisedForm.oars;\n\n\t\tthis.coachName = serialisedForm.coachName;\n\t\t// this._coachNameInput.value = serialisedForm.coachName;\n\t}\n\n\t/**\n\t * turns it from a class with functions to an interface with only the required data\n\t *\n\t * @returns Simplified form of this class\n\t */\n\tpublic serialise(): CrewEditorSerialised {\n\t\t// if (!this.validate()) return;\n\n\t\tlet tmp: CrewEditorSerialised = {\n\t\t\tseats: this.seats ? this.seats : [],\n\t\t\tcoachName: this.coachName ? this.coachName : '',\n\t\t\tboatName: this.boatName ? this.boatName : '',\n\t\t\tcrewType: this.crewName ? this.crewName : '',\n\t\t\toars: this.oars ? this.oars : '',\n\t\t};\n\n\t\treturn tmp;\n\t}\n\n\t/**\n\t * Returns true if this piece of sh*t is valid, NEVER TRUST USER INPUT\n\t *\n\t * @returns Whether this piece of shit is valid\n\t */\n\tprivate validate(): boolean {\n\t\tthis.currentError = undefined;\n\t\tthis.currentWarning = undefined;\n\n\t\t// MMMMMMMMMM REGEX\n\t\t// Matches boat crews\n\t\t// B U18 8+ is valid in this bs\n\t\tlet crewNameRegex =\n\t\t\t/(M|W|G|B) (U|N)((1)(5|6|7|8)) ((1|2|4|8)X?(\\+|-)?)/;\n\n\t\tif (this.crewName.trim() == '') {\n\t\t\tthis.currentError = 'No Crew Name';\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.crewName.trim().toUpperCase().match(crewNameRegex)) {\n\t\t\tthis.currentError = 'Invalid Name';\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.coachName.trim() == '') {\n\t\t\tthis.currentError = 'No Coach';\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.boatName.trim() == '') {\n\t\t\tthis.currentError = 'No Boat Allocated';\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.oars.trim() == '') {\n\t\t\tthis.currentError = 'No Oars';\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.seats.forEach((val) => {\n\t\t\tif (val == undefined) {\n\t\t\t\tthis.currentError = 'Not All Seats Filled';\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\t// OH BOY, Time to validate the CREWS;\n\n\t\tif (this.crewName.trim().toUpperCase().match(crewNameRegex)) {\n\t\t\tlet ageGroup: AgeGroup;\n\t\t\tlet gender: Gender;\n\t\t\tlet boatSize: BoatSize;\n\t\t\tlet novice: boolean;\n\n\t\t\tlet c = this.crewName.trim().toUpperCase();\n\n\t\t\tif (c.match(/(8X?\\+)/)) boatSize = 8;\n\t\t\telse if (c.match(/(4X?(\\+|-))/)) boatSize = 4;\n\t\t\telse if (c.match(/(2X?-?)/)) boatSize = 2;\n\t\t\telse if (c.match(/(1X-?)/)) boatSize = 1;\n\t\t\telse {\n\t\t\t\tthis.currentError = 'Invalid Name';\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (boatSize != this.seatCount) {\n\t\t\t\tthis.currentError = 'Crew Type does not match size';\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (c.match(/((U|N)18)/)) ageGroup = 'U18';\n\t\t\telse if (c.match(/((U|N)17)/)) ageGroup = 'U17';\n\t\t\telse if (c.match(/((U|N)16)/)) ageGroup = 'U16';\n\t\t\telse if (c.match(/((U|N)15)/)) ageGroup = 'U15';\n\t\t\telse {\n\t\t\t\tthis.currentError = 'Invalid Name';\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (c.match(/(M|B)/)) gender = 'M';\n\t\t\telse if (c.match(/(G|W)/)) gender = 'F';\n\t\t\telse {\n\t\t\t\tthis.currentError = 'Invalid Name';\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (c.match(/(N)(1)(5|6|7|8)/)) novice = true;\n\t\t\telse if (c.match(/(U)(1)(5|6|7|8)/)) novice = false;\n\t\t\telse {\n\t\t\t\tthis.currentError = 'Invalid Name';\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.seats.forEach((val: CrewMember, index: number) => {\n\t\t\t\tlet cox: boolean = false;\n\n\t\t\t\tif (index == this.seatCount && this.coxed) {\n\t\t\t\t\tcox = true;\n\t\t\t\t}\n\n\t\t\t\tif (novice && !val.novice && !cox) {\n\t\t\t\t\tthis.currentWarning = 'Non-Novices in Novice Boat';\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.seats.forEach((val: CrewMember, index: number) => {\n\t\t\t\tlet cox: boolean = false;\n\n\t\t\t\tif (index == this.seatCount && this.coxed) {\n\t\t\t\t\tcox = true;\n\t\t\t\t}\n\n\t\t\t\tif (val != undefined && val != null && !cox) {\n\t\t\t\t\tif (val.ageGroup != ageGroup) {\n\t\t\t\t\t\t// console.info(`${val.name} is a ${val.ageGroup} ${val.gender}, the age group of this boat is ${ageGroup}`)\n\n\t\t\t\t\t\tthis.currentWarning = 'Mixed Age Groups Detected';\n\t\t\t\t\t} else if (val.gender != gender) {\n\t\t\t\t\t\t// console.info(`${val.name} is a ${val.ageGroup} ${val.gender}, the gender of this boat is ${gender}`)\n\t\t\t\t\t\tthis.currentWarning = 'Mixed Genders Selected';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t// All of that just for warnings\n\t\t\t// and some more error detection i guess but the situations wont pop up\n\t\t\t// if they do, something is VERY wrong\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate updateErrorsAndWarnings() {\n\t\tif (this.currentError != undefined) {\n\t\t\tthis.errorBox.innerHTML = `<span style=\"color:#ff5555;\">Error: ${this.currentError}</span>`;\n\t\t} else if (this.currentWarning != undefined) {\n\t\t\tthis.errorBox.innerHTML = `<span style=\"color:#ffff55;\">Warning: ${this.currentWarning}</span>`;\n\t\t} else {\n\t\t\tthis.errorBox.innerHTML = `<span style=\"color:#55ff55;\">This is a Valid Crew</span>`;\n\t\t}\n\t}\n\n\t/**\n\t * Initialises the inputs\n\t *\n\t * also initialises the error box\n\t */\n\tprivate initInputs(): void {\n\t\tlet m = this.masterElement;\n\n\t\ttry {\n\t\t\tthis._coachNameInput = m.querySelector('input.coach');\n\t\t\tthis._crewNameInput = m.querySelector('input.crew-type');\n\t\t\tthis._boatNameInput = m.querySelector('input.boat');\n\t\t\tthis._oarsInput = m.querySelector('input.oars');\n\t\t\tthis.errorBox = m.querySelector('.errors');\n\t\t\tthis.deleteButton = m.querySelector('.deleteButton span');\n\t\t} catch (e: any) {\n\t\t\tconsole.error('Error Initialising Inputs on Crew Editor Item', e);\n\t\t}\n\n\t\tthis.validate();\n\t\tthis.updateErrorsAndWarnings();\n\n\t\ttry {\n\t\t\tthis._coachNameInput.addEventListener('input', () => {\n\t\t\t\tthis.coachName = this._coachNameInput.value;\n\t\t\t\tthis.validate();\n\t\t\t\tthis.updateErrorsAndWarnings();\n\t\t\t\tthis.save();\n\t\t\t});\n\t\t\tthis._crewNameInput.addEventListener('input', () => {\n\t\t\t\tthis.crewName = this._crewNameInput.value;\n\t\t\t\tthis.validate();\n\t\t\t\tthis.updateErrorsAndWarnings();\n\t\t\t\tthis.save();\n\t\t\t});\n\t\t\tthis._boatNameInput.addEventListener('input', () => {\n\t\t\t\tthis.boatName = this._boatNameInput.value;\n\t\t\t\tthis.validate();\n\t\t\t\tthis.updateErrorsAndWarnings();\n\t\t\t\tthis.save();\n\t\t\t});\n\t\t\tthis._oarsInput.addEventListener('input', () => {\n\t\t\t\tthis.oars = this._oarsInput.value;\n\t\t\t\tthis.validate();\n\t\t\t\tthis.updateErrorsAndWarnings();\n\t\t\t\tthis.save();\n\t\t\t});\n\t\t\tthis.deleteButton.addEventListener('click', () => {\n\t\t\t\tif (\n\t\t\t\t\t!confirm(\n\t\t\t\t\t\t'Are you sure you would like to delete this ' +\n\t\t\t\t\t\t\tthis.crewName\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t\treturn;\n\t\t\t\twindow.sessionStorage.setItem(\n\t\t\t\t\t'crewToDelete',\n\t\t\t\t\tthis.masterElement.getAttribute('data-index')\n\t\t\t\t);\n\t\t\t\tthis.parentElement.dispatchEvent(new Event('delete'));\n\t\t\t});\n\t\t} catch (e: any) {\n\t\t\tconsole.error(\n\t\t\t\t'Error Initilising Event Listeners on Crew Editor Item Inputs',\n\t\t\t\te\n\t\t\t);\n\t\t}\n\t}\n\t/**\n\t * React Style Render Function, just works\n\t */\n\trender() {\n\t\tlet tmp: HTMLElement = document.createElement('div');\n\n\t\ttmp.classList.add('item');\n\n\t\tlet sizeString: string;\n\t\tlet coxString: string;\n\n\t\tswitch (this.seatCount) {\n\t\t\tcase 1:\n\t\t\t\ttmp.classList.add('single');\n\t\t\t\tsizeString = 'single';\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ttmp.classList.add('double');\n\t\t\t\tsizeString = 'double';\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\ttmp.classList.add('quad');\n\t\t\t\tsizeString = 'quad';\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\ttmp.classList.add('octuple');\n\t\t\t\tsizeString = 'octuple';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (this.coxed) {\n\t\t\tcoxString = 'coxed';\n\t\t} else {\n\t\t\tcoxString = 'coxless';\n\t\t}\n\n\t\ttmp.innerHTML = `\n\t\t\t<div class=\"topRow\">\n\t\t\t\t<div class=\"input crew-type\">\n\t\t\t\t\t<input type=\"text\" required class=\"crew-type\" value=\"${\n\t\t\t\t\t\tthis.crewName ? this.crewName : ''\n\t\t\t\t\t}\">\n\t\t\t\t\t<span class=\"highlight\"></span>\n\t\t\t\t\t<span class=\"bar\"></span>\n\t\t\t\t\t<label>Crew Name</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"input oars\">\n\t\t\t\t\t<input type=\"text\" required class=\"oars\" value=\"${this.oars ? this.oars : ''}\">\n\t\t\t\t\t<span class=\"highlight\"></span>\n\t\t\t\t\t<span class=\"bar\"></span>\n\t\t\t\t\t<label>Oars</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"middleRow\">\n\t\t\t\t<div class=\"input coach\">\n\t\t\t\t\t<input type=\"text\" required class=\"coach\" value=\"${\n\t\t\t\t\t\tthis.coachName ? this.coachName : ''\n\t\t\t\t\t}\">\n\t\t\t\t\t<span class=\"highlight\"></span>\n\t\t\t\t\t<span class=\"bar\"></span>\n\t\t\t\t\t<label>Coach</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"input boat\">\n\t\t\t\t\t<input type=\"text\" required class=\"boat\" value=\"${\n\t\t\t\t\t\tthis.boatName ? this.boatName : ''\n\t\t\t\t\t}\">\n\t\t\t\t\t<span class=\"highlight\"></span>\n\t\t\t\t\t<span class=\"bar\"></span>\n\t\t\t\t\t<label>Boat Name</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"names ${sizeString} ${coxString}\">\n\n\t\t\t<!-- Every Boat has a Stroke Seat, even  singles -->\n\n\t\t\t\t<div class=\"droppable\"\n\t\t\t\t\t${\n\t\t\t\t\t\t!!this.seats[0]\n\t\t\t\t\t\t\t? `\n\t\t\t\t\t\tdata-id=\"${this.seats[0].id}\" \n\t\t\t\t\t\tdata-name=\"${this.seats[0].name}\"\n\t\t\t\t\t\tdata-novice=\"${this.seats[0].novice ? 'true' : 'false'}\"\n\t\t\t\t\t\tdata-age-group=\"${this.seats[0].ageGroup}\n\t\t\t\t\t\tdata-gender=\"${this.seats[0].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t\t: ``\n\t\t\t\t\t}>\n\t\t\t\t</div>\n\n\n\n\t\t\t\t${\n\t\t\t\t\tthis.seatCount == 4 || this.seatCount == 8\n\t\t\t\t\t\t? `\n\t\t\t\t<div class=\"droppable\"\n\t\t\t\t${\n\t\t\t\t\t!!this.seats[1]\n\t\t\t\t\t\t? `\n\t\t\t\t\tdata-id=\"${this.seats[1].id}\" \n\t\t\t\t\tdata-name=\"${this.seats[1].name}\"\n\t\t\t\t\tdata-novice=\"${this.seats[1].novice ? 'true' : 'false'}\"\n\t\t\t\t\tdata-age-group=\"${this.seats[1].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.seats[1].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"droppable\"\n\t\t\t\t${\n\t\t\t\t\t!!this.seats[2]\n\t\t\t\t\t\t? `\n\t\t\t\t\tdata-id=\"${this.seats[2].id}\" \n\t\t\t\t\tdata-name=\"${this.seats[2].name}\"\n\t\t\t\t\tdata-novice=\"${this.seats[2].novice ? 'true' : 'false'}\"\n\t\t\t\t\tdata-age-group=\"${this.seats[2].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.seats[2].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}>\n\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}\n\n\t\t\t\t${\n\t\t\t\t\tthis.seatCount == 8\n\t\t\t\t\t\t? `\n\n\t\t\t\t<div class=\"droppable\"\n\t\t\t\t${\n\t\t\t\t\t!!this.seats[3]\n\t\t\t\t\t\t? `\n\t\t\t\t\tdata-id=\"${this.seats[3].id}\" \n\t\t\t\t\tdata-name=\"${this.seats[3].name}\"\n\t\t\t\t\tdata-novice=\"${this.seats[3].novice ? 'true' : 'false'}\"\n\t\t\t\t\tdata-age-group=\"${this.seats[3].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.seats[3].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"droppable\"\n\t\t\t\t${\n\t\t\t\t\t!!this.seats[4]\n\t\t\t\t\t\t? `\n\t\t\t\t\tdata-id=\"${this.seats[4].id}\" \n\t\t\t\t\tdata-name=\"${this.seats[4].name}\"\n\t\t\t\t\tdata-novice=\"${this.seats[4].novice ? 'true' : 'false'}\"\n\t\t\t\t\tdata-age-group=\"${this.seats[4].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.seats[4].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"droppable\"\n\t\t\t\t${\n\t\t\t\t\t!!this.seats[5]\n\t\t\t\t\t\t? `\n\t\t\t\t\tdata-id=\"${this.seats[5].id}\" \n\t\t\t\t\tdata-name=\"${this.seats[5].name}\"\n\t\t\t\t\tdata-novice=\"${this.seats[5].novice ? 'true' : 'false'}\"\n\t\t\t\t\tdata-age-group=\"${this.seats[5].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.seats[5].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"droppable\"\n\t\t\t\t${\n\t\t\t\t\t!!this.seats[6]\n\t\t\t\t\t\t? `\n\t\t\t\t\tdata-id=\"${this.seats[6].id}\" \n\t\t\t\t\tdata-name=\"${this.seats[6].name}\"\n\t\t\t\t\tdata-novice=\"${this.seats[6].novice ? 'true' : 'false'}\"\n\t\t\t\t\tdata-age-group=\"${this.seats[6].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.seats[6].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}>\n\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t} \n\n\t\t\t\t${\n\t\t\t\t\t(this.seatCount == 2 ||\n\t\t\t\t\t\tthis.seatCount == 4 ||\n\t\t\t\t\t\tthis.seatCount == 8) &&\n\t\t\t\t\tthis.coxed\n\t\t\t\t\t\t? `\n\t\t\t\t\t<div class=\"droppable\"\n\t\t\t\t\t${\n\t\t\t\t\t\t!!this.seats[this.seatCount - 2]\n\t\t\t\t\t\t\t? `\n\t\t\t\t\t\tdata-id=\"${this.seats[this.seatCount - 2].id}\" \n\t\t\t\t\t\tdata-name=\"${this.seats[this.seatCount - 2].name}\"\n\t\t\t\t\t\tdata-novice=\"${this.seats[this.seatCount - 2].novice ? 'true' : 'false'}\"\n\t\t\t\t\t\tdata-age-group=\"${this.seats[this.seatCount - 2].ageGroup}\n\t\t\t\t\t\tdata-gender=\"${this.seats[this.seatCount - 2].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t\t: ``\n\t\t\t\t\t}>\n\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}\n\n\t\t\t\t${\n\t\t\t\t\t(this.seatCount == 2 ||\n\t\t\t\t\t\tthis.seatCount == 4 ||\n\t\t\t\t\t\tthis.seatCount == 8) &&\n\t\t\t\t\t!this.coxed\n\t\t\t\t\t\t? `\n\t\t\t\t\t<div class=\"droppable\"\n\t\t\t\t\t${\n\t\t\t\t\t\t!!this.seats[this.seatCount - 1]\n\t\t\t\t\t\t\t? `\n\t\t\t\t\t\tdata-id=\"${this.seats[this.seatCount - 1].id}\" \n\t\t\t\t\t\tdata-name=\"${this.seats[this.seatCount - 1].name}\"\n\t\t\t\t\t\tdata-novice=\"${this.seats[this.seatCount - 1].novice ? 'true' : 'false'}\"\n\t\t\t\t\t\tdata-age-group=\"${this.seats[this.seatCount - 1].ageGroup}\n\t\t\t\t\t\tdata-gender=\"${this.seats[this.seatCount - 1].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t\t: ``\n\t\t\t\t\t}>\n\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}\n\n\n\t\t\t\t${\n\t\t\t\t\tthis.coxed\n\t\t\t\t\t\t? `<div class=\"separator\"> - </div>\n\t\t\t\t\n\t\t\t\t\t<div class=\"droppable\"\n\t\t\t\t\t${\n\t\t\t\t\t\t!!this.seats[this.seatCount - 1]\n\t\t\t\t\t\t\t? `\n\t\t\t\t\t\tdata-id=\"${this.seats[this.seatCount - 1].id}\" \n\t\t\t\t\t\tdata-name=\"${this.seats[this.seatCount - 1].name}\"\n\t\t\t\t\t\tdata-novice=\"${this.seats[this.seatCount - 1].novice ? 'true' : 'false'}\"\n\t\t\t\t\t\tdata-age-group=\"${this.seats[this.seatCount - 1].ageGroup}\n\t\t\t\t\t\tdata-gender=\"${this.seats[this.seatCount - 1].gender}\"\n\t\t\t\t\t`\n\t\t\t\t\t\t\t: ``\n\t\t\t\t\t}>\n\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t\t\t\t: ``\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div class=\"bottomRow\">\n\t\t\t\t<div class=\"errors\">\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<span style=\"flex: 1 1 auto;\"> </span>\n\t\t\t\t<div class=\"deleteButton\">\n\t\t\t\t\t<span class=\"material-icons\">delete</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\ttmp.querySelectorAll('div.droppable').forEach(\n\t\t\t(val: Element, index: number) => {\n\t\t\t\tif (this.seats[index] != undefined) {\n\t\t\t\t\tval.innerHTML = `\n\t\t\t\t\t<span class=\"name\">${this.seats[index].name}</span>\n\t\t\t\t\t&nbsp;\n\t\t\t\t\t<span class=\"info\">${this.seats[index].gender} ${this.seats[index].ageGroup} ${\n\t\t\t\t\t\tthis.seats[index].novice ? 'N' : ''\n\t\t\t\t\t}</span>\n\t\t\t\t`;\n\t\t\t\t}\n\n\t\t\t\tval.setAttribute('draggable', 'true');\n\n\t\t\t\t(val as HTMLElement).ondrop = (ev: DragEvent) => {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tlet member: CrewMember;\n\n\t\t\t\t\tif (val.hasAttribute('data-id')) {\n\t\t\t\t\t\twindow.sessionStorage.setItem(\n\t\t\t\t\t\t\t'returningCrewMember',\n\t\t\t\t\t\t\tval.getAttribute('data-id')\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.parentElement.dispatchEvent(\n\t\t\t\t\t\t\tnew Event('returningCrewMember')\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// console.info(\"SESSION STORAGE SET\");\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// console.info(\"GOT CREW MEMBER\", JSON.parse(window.sessionStorage.getItem(\"draggedItem\")));\n\t\t\t\t\t\t// console.info(\"GOT CREW MEMBER\", JSON.parse(ev.dataTransfer.getData(\"data\")));\n\n\t\t\t\t\t\t// member = JSON.parse(window.sessionStorage.getItem(\"draggedItem\")) as CrewMember;\n\t\t\t\t\t\tmember = JSON.parse(\n\t\t\t\t\t\t\tev.dataTransfer.getData('data')\n\t\t\t\t\t\t) as CrewMember;\n\t\t\t\t\t} catch (e: any) {\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t'JSON.parse Failed',\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\tev.dataTransfer.getData('data')\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log(member);\n\n\t\t\t\t\tval.setAttribute('data-id', member.id.toString());\n\t\t\t\t\tval.setAttribute('data-age-group', member.ageGroup);\n\t\t\t\t\tval.setAttribute('data-name', member.name);\n\t\t\t\t\tval.setAttribute(\n\t\t\t\t\t\t'data-novice',\n\t\t\t\t\t\tmember.novice ? 'true' : 'false'\n\t\t\t\t\t);\n\t\t\t\t\tval.setAttribute('data-gender', member.gender);\n\n\t\t\t\t\tval.setAttribute('data-default', val.innerHTML);\n\n\t\t\t\t\tval.innerHTML = `\n\t\t\t\t\t<span class=\"name\">${member.name}</span>&nbsp;\n\t\t\t\t\t<span class=\"info\">${member.gender} ${member.ageGroup} ${\n\t\t\t\t\t\tmember.novice ? 'N' : ''\n\t\t\t\t\t}</span>\n\t\t\t\t`;\n\n\t\t\t\t\tthis.seats[index] = member;\n\n\t\t\t\t\twindow.sessionStorage.setItem(\n\t\t\t\t\t\t'acceptedCrewMember',\n\t\t\t\t\t\tval.getAttribute('data-id')!\n\t\t\t\t\t);\n\t\t\t\t\tthis.parentElement.dispatchEvent(\n\t\t\t\t\t\tnew Event('acceptedCrewMember')\n\t\t\t\t\t);\n\t\t\t\t\t// console.info(\"SESSION STORAGE SET\");\n\n\t\t\t\t\tthis.validate();\n\t\t\t\t\tthis.updateErrorsAndWarnings();\n\n\t\t\t\t\tthis.save();\n\n\t\t\t\t\t// ev.target.innerHTML =\n\t\t\t\t};\n\n\t\t\t\t(val as HTMLElement).ondragover = (ev: DragEvent) => {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t};\n\n\t\t\t\t(val as HTMLElement).ondragenter = () => {\n\t\t\t\t\tval.classList.add('hovered');\n\t\t\t\t};\n\n\t\t\t\t(val as HTMLElement).ondragleave = () => {\n\t\t\t\t\tval.classList.remove('hovered');\n\t\t\t\t};\n\n\t\t\t\t(val as HTMLElement).onclick = () => {\n\t\t\t\t\t// ev.dataTransfer.setData(\"data\", JSON.stringify(this.seats[index]));\n\n\t\t\t\t\twindow.sessionStorage.setItem(\n\t\t\t\t\t\t'returningCrewMember',\n\t\t\t\t\t\tval.getAttribute('data-id')\n\t\t\t\t\t);\n\t\t\t\t\tthis.parentElement.dispatchEvent(\n\t\t\t\t\t\tnew Event('returningCrewMember')\n\t\t\t\t\t);\n\t\t\t\t\t// console.info(\"SESSION STORAGE SET\");\n\n\t\t\t\t\t// BRUH MOMENT\n\t\t\t\t\tthis.seats[index] = undefined;\n\n\t\t\t\t\tval.removeAttribute('data-id');\n\t\t\t\t\tval.removeAttribute('data-age-group');\n\t\t\t\t\tval.removeAttribute('data-name');\n\t\t\t\t\tval.removeAttribute('data-novice');\n\t\t\t\t\tval.removeAttribute('data-gender');\n\n\t\t\t\t\tval.innerHTML = val.getAttribute('data-default');\n\n\t\t\t\t\tthis.validate();\n\t\t\t\t\tthis.updateErrorsAndWarnings();\n\n\t\t\t\t\tthis.save();\n\t\t\t\t};\n\t\t\t}\n\t\t);\n\n\t\tthis.masterElement = tmp;\n\n\t\tthis.initInputs();\n\t\tthis.updateErrorsAndWarnings();\n\t}\n}\n\nexport { CrewEditorItem, CrewEditorSerialised };\n","import { BoatSize, CrewMember } from \"./types\";\nimport { CrewEditorItem, CrewEditorSerialised } from './components/CrewEditorItem'\nclass CrewEditor {\n\tmainPoint: HTMLElement;\n\n\ttable: HTMLTableElement;\n\teditor: HTMLElement;\n\n\tfab: HTMLElement;\n\tfabSelect: HTMLElement;\n\n\tfabSelectButtons: HTMLElement[];\n\n\tpublic crews: CrewEditorItem[] = [];\n\n\tpublic crewMembers!: CrewMember[];\n\n\tpublic usedCrewMembers: string[] = [];\n\n\t/**\n\t * Constructor of the Crew Editor Class\n\t * \n\t * @param querySelector The css selector for the point for which this should attach to\n\t */\n\tconstructor(querySelector: string) {\n\t\tthis.mainPoint = document.querySelector(querySelector)!;\n\t\tthis.table = this.mainPoint.querySelector(\"table\")!;\n\t\tthis.editor = this.mainPoint.querySelector(\".editor\")!;\n\t\tthis.fab = this.mainPoint.querySelector(\"div.fab\")!;\n\t\tthis.fabSelect = this.mainPoint.querySelector(\"div.selector\")!;\n\n\t\tthis.fabSelectButtons = [\n\t\t\tthis.fabSelect.querySelector(\".single\")!,\n\t\t\tthis.fabSelect.querySelector(\".double\")!,\n\t\t\tthis.fabSelect.querySelector(\".coxless-quad\")!,\n\t\t\tthis.fabSelect.querySelector(\".coxed-quad\")!,\n\t\t\tthis.fabSelect.querySelector(\".octi\")!\n\t\t];\n\n\t\t// this.crews = [];\n\t\tthis.loadCrewMembers();\n\t\tthis.loadAllCrews();\n\n\t\tif (this.crews.length <= 0) {\n\t\t\tthis.editor.innerHTML = `\n\t\t\t\t\t<div class=\"empty-container\">\n\t\t\t\t\t\t<h1 class=\"empty\">Click the + to make a crew</h1>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t} else {\n\t\t\tthis.renderAllCrews();\n\t\t}\n\n\t\tthis.editor.addEventListener('returningCrewMember', () => {\n\n\t\t\tthis.removeMemberFromUsedList(parseInt(window.sessionStorage.getItem(\"returningCrewMember\")!));\n\n\t\t\twindow.sessionStorage.removeItem(\"returningCrewMember\");\n\t\t});\n\n\t\t// this.editor.addEventListener('returningCrewMembers', () => {\n\t\t// \twindow.sessionStorage.getItem(\"returningMembers\").split(',').forEach((val) => { this.removeMemberFromUsedList(parseInt(val)) });\n\t\t// \twindow.sessionStorage.removeItem('reurningMembers');\n\t\t// });\n\n\t\tthis.editor.addEventListener(\"acceptedCrewMember\", () => {\n\t\t\tthis.addMemberToUsedList(parseInt(window.sessionStorage.getItem(\"acceptedCrewMember\")!));\n\n\t\t\twindow.sessionStorage.removeItem(\"acceptedCrewMember\")\n\t\t});\n\n\t\tthis.editor.addEventListener(\"save\", () => {\n\t\t\tthis.saveAllCrews();\n\t\t});\n\n\t\tthis.editor.addEventListener(\"delete\", () => {\n\n\t\t\tthis.deleteCrew(parseInt(window.sessionStorage.getItem(\"crewToDelete\")));\n\n\t\t\twindow.sessionStorage.removeItem(\"crewToDelete\");\n\t\t\tthis.saveAllCrews();\n\t\t\tthis.renderAllCrews();\n\t\t\tthis.insertDataIntoTable();\n\t\t})\n\n\t\twindow.addEventListener('crewMembersEdited', () => {\n\t\t\tthis.loadCrewMembers();\n\t\t});\n\n\t\tthis.fabSelectButtons.forEach((val: HTMLElement, index: number) => {\n\t\t\tval.onclick = () => {\n\t\t\t\tlet buttonCrewSizeValue: BoatSize;\n\t\t\t\tlet coxed: boolean = false;\n\t\t\t\tswitch (index) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tbuttonCrewSizeValue = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tbuttonCrewSizeValue = 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tbuttonCrewSizeValue = 4;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tbuttonCrewSizeValue = 4;\n\t\t\t\t\t\tcoxed = true;\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tbuttonCrewSizeValue = 8;\n\t\t\t\t\t\tcoxed = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (buttonCrewSizeValue == undefined) return;\n\n\t\t\t\tthis.crews.push(new CrewEditorItem({ parent: this.editor, config: { size: buttonCrewSizeValue, coxed: coxed } }));\n\t\t\t\tthis.saveAllCrews();\n\t\t\t\tthis.renderAllCrews();\n\t\t\t}\n\t\t});\n\n\t\tthis.fab.addEventListener('click', () => {\n\n\t\t\tif (this.fab.innerHTML == \"+\") {\n\t\t\t\tthis.fabSelect.classList.toggle('hidden', false);\n\t\t\t\tthis.fab.innerHTML = \"-\"\n\t\t\t} else {\n\t\t\t\tthis.fabSelect.classList.toggle('hidden', true);\n\t\t\t\tthis.fab.innerHTML = \"+\"\n\t\t\t}\n\t\t});\n\n\n\t\tconsole.info(\"Crew Editor: Initialised Successfully\")\n\n\t}\n\n\t/**\n\t * Renders the crews to the screen\n\t */\n\tprivate renderAllCrews() {\n\n\t\tthis.editor.innerHTML = ``;\n\n\t\ttry {\n\t\t\tif (this.crews.length == 0 || !this.crews) {\n\t\t\t\tthis.editor.innerHTML = `\n\t\t\t\t\t<div class=\"empty-container\">\n\t\t\t\t\t\t<h1 class=\"empty\">Click the + to make a crew</h1>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (e: any) {\n\t\t\tthis.editor.innerHTML = `\n\t\t\t\t<div class=\"empty-container\">\n\t\t\t\t\t<h1 class=\"empty\">Click the + to make a crew</h1>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.crews.forEach((val: CrewEditorItem, i: number) => {\n\t\t\tval.render();\n\n\t\t\tval.masterElement.setAttribute(\"data-index\", i.toString());\n\n\t\t\tthis.editor.appendChild(val.masterElement);\n\t\t});\n\n\t\tthis.saveAllCrews();\n\t}\n\n\tprivate deleteCrew(index: number) {\n\t\tlet tmp: CrewEditorItem[] = [];\n\t\t// let \n\t\tlet tmpToRemove: string[] = [];\n\t\tlet tmpUsed: string[] = [];\n\n\t\tthis.crews.forEach((val, i) => {\n\t\t\tif (i == index) {\n\t\t\t\tval.seats.forEach((val) => {\n\t\t\t\t\tif (val != undefined && val != null) {\n\t\t\t\t\t\ttmpToRemove.push(val.id.toString())\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse { tmp.push(val); }\n\t\t});\n\n\t\tthis.usedCrewMembers.forEach((val) => {\n\t\t\tif (!tmpToRemove.includes(val)) {\n\t\t\t\ttmpUsed.push(val)\n\t\t\t}\n\t\t});\n\n\t\tthis.crews = tmp;\n\t\tthis.usedCrewMembers = tmpUsed;\n\n\t\tthis.saveAllCrews();\n\t}\n\n\t/**\n\t * Saves all crews to localstorage\n\t */\n\tprivate saveAllCrews() {\n\n\t\twindow.localStorage.removeItem(\"crews\");\n\n\t\tlet serialisedOject: CrewEditorSerialised[] = [];\n\n\t\tthis.crews.forEach((val: CrewEditorItem) => {\n\t\t\tserialisedOject.push(val.serialise());\n\t\t});\n\n\t\twindow.localStorage.setItem(\"crews\", btoa(JSON.stringify(serialisedOject)));\n\t\twindow.dispatchEvent(new Event(\"storage\"));\n\t}\n\n\t/**\n\t * Loads the crews from the localstorage\n\t */\n\tprivate loadAllCrews() {\n\t\t// throw Error(\"Not Implemented\");\n\n\t\tif (!window.localStorage.getItem(\"crews\")) return;\n\n\t\t// console.info(JSON.parse(atob(window.localStorage.getItem(\"crews\"))));\n\n\t\tthis.crews = [];\n\t\tlet decodedLocalStorage = JSON.parse(atob(window.localStorage.getItem(\"crews\"))) as CrewEditorSerialised[];\n\n\t\tdecodedLocalStorage.forEach((val) => {\n\t\t\tif (val.boatName == undefined) val.boatName = \"\";\n\t\t\tif (val.coachName == undefined) val.coachName = \"\";\n\t\t\tif (val.crewType == undefined) val.crewType = \"\";\n\t\t\tif (val.oars == undefined) val.oars = \"\";\n\n\t\t\tval.seats.forEach((val: CrewMember | null | undefined) => {\n\t\t\t\tif (val == null || val == undefined) return;\n\t\t\t\tthis.usedCrewMembers.push(val.id.toString());\n\t\t\t})\n\n\t\t\tthis.crews.push(new CrewEditorItem({ parent: this.editor, serialisedForm: val }));\n\t\t});\n\n\t\tthis.insertDataIntoTable();\n\t\tthis.renderAllCrews();\n\t}\n\n\t/**\n\t * Congrats mate :), you just made maadi\n\t * \n\t * @param id Crew Member ID of the crew member to add\n\t */\n\tprivate addMemberToUsedList(id: number) {\n\t\tif (this.usedCrewMembers.indexOf(id + \"\") == -1) this.usedCrewMembers.push(id.toString());\n\n\t\tthis.insertDataIntoTable();\n\n\t\t// console.info(this.usedCrewMembers);\n\t}\n\n\t/**\n\t * Congrats retard, if this function is called on you, youve been kicked form a crew :)\n\t * \n\t * @param id Crew Member Id of the crew member to remove\n\t */\n\tprivate removeMemberFromUsedList(id: number) {\n\t\tlet tmp: string[] = [];\n\n\t\tthis.usedCrewMembers.forEach((val) => {\n\t\t\tif (val != id.toString()) {\n\t\t\t\ttmp.push(val);\n\t\t\t}\n\t\t})\n\n\t\tthis.usedCrewMembers = tmp;\n\n\t\tthis.insertDataIntoTable();\n\n\t\t// console.info(this.usedCrewMembers);\n\n\t}\n\n\t/**\n\t * Returns the index in this.data of an element with the specified id\n\t * \n\t * @param id The id of the element you'd like to find the index of\n\t * @returns the index in this.data of the element with the id or `undefined` if not found\n\t */\n\tprivate getIndexOfID(id: number): number {\n\t\tlet i: number = -1;\n\n\t\tif (id < 0) console.error(\"ID IS LESS THAN 0\");\n\n\t\tthis.crewMembers.forEach((val, index) => {\n\t\t\tif (val.id == id) {\n\t\t\t\ti = index;\n\t\t\t\treturn i;\n\t\t\t}\n\t\t});\n\n\t\tconsole.error(\"CANNOT FIND INDEX OF CREW MEMBER\", id);\n\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Scuffed function that checks if a crew member is in use, prevents stupid shit\n\t * \n\t * @param id The ID of the member you are chcking for\n\t * @returns whether the member is already on the list (in use)\n\t */\n\tprivate usedMembersListContains(id: number): boolean {\n\n\t\t// console.info(this.usedCrewMembers);\n\n\t\tlet tmp = false;\n\n\t\ttry {\n\t\t\tthis.usedCrewMembers.forEach((val: string) => {\n\t\t\t\tif (val == id.toString()) {\n\t\t\t\t\ttmp = true;\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (e: any) {\n\t\t\tconsole.error(e);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn tmp;\n\t}\n\n\t/**\n\t * Put data from list to table\n\t */\n\tprivate insertDataIntoTable() {\n\t\t// for (let i: number = 1; i < this.table.rows.length; i++) {\n\t\t// \ttry {\n\t\t// \t\tthis.table.deleteRow(i);\n\t\t// \t} catch (e) {\n\t\t// \t\tconsole.warn(e);\n\t\t// \t}\n\t\t// }\n\n\t\tthis.table.innerHTML = `\n\t\t\t<tr class=\"header\">\n\t\t\t\t<th>Gender/Age Group</th>\n\t\t\t\t<th class=\"big\">Name</th>\n\t\t\t</tr>\n\t\t`;\n\n\t\t// this.sort(this.crewMembers);\n\n\t\tlet filtered: CrewMember[] = [];\n\n\t\tthis.crewMembers.forEach((member: CrewMember) => {\n\t\t\tif (!this.usedCrewMembers.includes(`${member.id}`)) {\n\t\t\t\tfiltered.push(member);\n\t\t\t}\n\t\t})\n\n\t\t// filtered = this.sort(filtered);\n\n\t\t// console.info(\"FILTERED LIST LENGTH\", filtered.length);\n\n\t\tfor (let i = 0; i < filtered.length; i++) {\n\n\t\t\tlet val = filtered[i];\n\n\t\t\t// if (val == undefined) return;\n\t\t\tif (this.usedCrewMembers.includes(`${val.id}`)) {\n\t\t\t\t// console.info(val, \"CONTAINS\", val.id);\n\t\t\t} else {\n\t\t\t\tlet row = this.table.insertRow();\n\n\t\t\t\trow.innerHTML = (`\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span class=\"material-icons\">drag_indicator</span>\n\t\t\t\t\t\t<span class=\"separator\"></span>\n\t\t\t\t\t\t<span class=\"gender\">${(val.gender)}</span>\n\t\t\t\t\t\t<span class=\"separator\">/</span>\n\t\t\t\t\t\t<span>${(val.ageGroup)} ${val.novice ? \"Novice\" : \"\"}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"big\">\n\t\t\t\t\t\t${(val.name)}\n\t\t\t\t\t</td>\n\t\t\t\t`);\n\n\t\t\t\trow.setAttribute(\"draggable\", \"true\");\n\t\t\t\trow.setAttribute(\"data-id\", `${val.id}`);\n\t\t\t\t// row.setAttribute(\"data-index\", i.toString());\n\n\t\t\t\t// row.ondragstart = (ev:DragEvent) => {\n\t\t\t\t// \tev.preventDefault();\n\t\t\t\t// }\n\n\t\t\t\trow.ondragstart = (ev: DragEvent) => {\n\t\t\t\t\tev.dataTransfer.setData(\"data\", JSON.stringify(val));\n\t\t\t\t\t// window.sessionStorage.setItem(\"draggedItem\", JSON.stringify(val));\n\t\t\t\t}\n\n\t\t\t\t// console.info(\"SUCCESSFULLY RENDERED ROW FOR\", val.id);\n\t\t\t}\n\n\t\t\t// console.warn(\"FAILED TO RENDER ROW FOR\", val.id);\n\t\t}\n\t}\n\n\t/**\n\t * Load Crew members\n\t */\n\tprivate loadCrewMembers() {\n\t\tif (localStorage.getItem('crewMembers') != null) {\n\t\t\tthis.crewMembers = JSON.parse(atob(localStorage.getItem('crewMembers')!));\n\t\t} else {\n\t\t\tthis.crewMembers = [];\n\t\t}\n\n\t\t// this.sort(this.crewMembers);\n\t\tthis.insertDataIntoTable();\n\t}\n}\n\nexport { CrewEditor }","import { BoatSize } from \"../types\";\nimport { CrewEditorSerialised } from \"./CrewEditorItem\";\n\n\nexport class CrewDisplayItem {\n\tmainElement: HTMLElement;\n\tcrew: CrewEditorSerialised;\n\tsizeString: string;\n\tsize: BoatSize;\n\tcoxed: boolean;\n\n\tconstructor(crew: CrewEditorSerialised) {\n\t\tthis.mainElement = document.createElement('div');\n\t\tthis.crew = crew;\n\t\tthis.sizeString = this.calculateBoatSizeStringForRenderer();\n\t}\n\n\tcalculateBoatSizeStringForRenderer(): string {\n\t\tlet str: string = \"\";\n\n\t\tswitch (this.crew.seats.length) {\n\t\t\tcase 1:\n\t\t\t\tstr = \"single coxless\";\n\t\t\t\tthis.size = 1;\n\t\t\t\tthis.coxed = false;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tstr = \"double coxless\";\n\t\t\t\tthis.size = 2;\n\t\t\t\tthis.coxed = false;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tstr = \"quad coxless\";\n\t\t\t\tthis.size = 4;\n\t\t\t\tthis.coxed = false\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tstr = \"quad coxed\";\n\t\t\t\tthis.size = 4;\n\t\t\t\tthis.coxed = true;\n\t\t\t\tbreak;\n\t\t\tcase 9:\n\t\t\t\tstr = \"octuple coxed\";\n\t\t\t\tthis.size = 8;\n\t\t\t\tthis.coxed = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"INVALID CREW\");\n\t\t}\n\n\t\treturn str;\n\t}\n\n\trender(): HTMLElement {\n\t\tthis.mainElement.classList.add(\"item\");\n\t\tthis.mainElement.innerHTML = `\n\t\t\t<div class=\"left\">\n\t\t\t\t<div class=\"header\">\n\t\t\t\t\t<h1>${this.crew.crewType.toUpperCase()}</h1>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sep\">hi</div>\n\t\t\t\t<div class=\"sub\">\n\t\t\t\t\t<h2>Boat</h2>\n\t\t\t\t\t<span>${this.crew.boatName}</span>\n\t\t\t\t\t<h2>Coach</h2>\n\t\t\t\t\t<span>${this.crew.coachName}</span>\n\t\t\t\t\t<h2>Oars</h2>\n\t\t\t\t\t<span>${this.crew.oars}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"right ${this.sizeString}\">\n\n\t\t\t<!-- Every Boat has a Stroke Seat, even  singles -->\n\n\t\t\t\t<div \n\t\t\t\t\t${!!this.crew.seats[0] ? `\n\t\t\t\t\t\tdata-id=\"${this.crew.seats[0].id}\" \n\t\t\t\t\t\tdata-name=\"${this.crew.seats[0].name}\"\n\t\t\t\t\t\tdata-novice=\"${this.crew.seats[0].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\t\tdata-age-group=\"${this.crew.seats[0].ageGroup}\n\t\t\t\t\t\tdata-gender=\"${this.crew.seats[0].gender}\"\n\t\t\t\t\t` : ``}>\n\t\t\t\t\t${this.crew.seats[0] ? `${this.crew.seats[0].name}` : ``}\n\t\t\t\t</div>\n\n\n\n\t\t\t\t${this.size == 4 || this.size == 8 ? `\n\t\t\t\t<div \n\t\t\t\t${!!this.crew.seats[1] ? `\n\t\t\t\t\tdata-id=\"${this.crew.seats[1].id}\" \n\t\t\t\t\tdata-name=\"${this.crew.seats[1].name}\"\n\t\t\t\t\tdata-novice=\"${this.crew.seats[1].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\tdata-age-group=\"${this.crew.seats[1].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.crew.seats[1].gender}\"\n\t\t\t\t\t`: ``}>\n\t\t\t\t\t${this.crew.seats[1] ? `${this.crew.seats[1].name}` : ``}\n\t\t\t\t</div>\n\n\t\t\t\t<div \n\t\t\t\t${!!this.crew.seats[2] ? `\n\t\t\t\t\tdata-id=\"${this.crew.seats[2].id}\" \n\t\t\t\t\tdata-name=\"${this.crew.seats[2].name}\"\n\t\t\t\t\tdata-novice=\"${this.crew.seats[2].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\tdata-age-group=\"${this.crew.seats[2].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.crew.seats[2].gender}\"\n\t\t\t\t\t`: ``}>\n\t\t\t\t\t${this.crew.seats[2] ? `${this.crew.seats[2].name}` : ``}\n\t\t\t\t</div>\n\t\t\t\t`: ``}\n\n\t\t\t\t${this.size == 8 ? `\n\n\t\t\t\t<div \n\t\t\t\t${!!this.crew.seats[3] ? `\n\t\t\t\t\tdata-id=\"${this.crew.seats[3].id}\" \n\t\t\t\t\tdata-name=\"${this.crew.seats[3].name}\"\n\t\t\t\t\tdata-novice=\"${this.crew.seats[3].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\tdata-age-group=\"${this.crew.seats[3].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.crew.seats[3].gender}\"\n\t\t\t\t\t`: ``}>\n\t\t\t\t\t${this.crew.seats[3] ? `${this.crew.seats[3].name}` : ``}\n\t\t\t\t</div>\n\n\t\t\t\t<div \n\t\t\t\t${!!this.crew.seats[4] ? `\n\t\t\t\t\tdata-id=\"${this.crew.seats[4].id}\" \n\t\t\t\t\tdata-name=\"${this.crew.seats[4].name}\"\n\t\t\t\t\tdata-novice=\"${this.crew.seats[4].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\tdata-age-group=\"${this.crew.seats[4].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.crew.seats[4].gender}\"\n\t\t\t\t\t`: ``}>\n\t\t\t\t\t${this.crew.seats[4] ? `${this.crew.seats[4].name}` : ``}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div \n\t\t\t\t${!!this.crew.seats[5] ? `\n\t\t\t\t\tdata-id=\"${this.crew.seats[5].id}\" \n\t\t\t\t\tdata-name=\"${this.crew.seats[5].name}\"\n\t\t\t\t\tdata-novice=\"${this.crew.seats[5].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\tdata-age-group=\"${this.crew.seats[5].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.crew.seats[5].gender}\"\n\t\t\t\t\t`: ``}>\n\t\t\t\t\t${this.crew.seats[5] ? `${this.crew.seats[5].name}` : ``}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div \n\t\t\t\t${!!this.crew.seats[6] ? `\n\t\t\t\t\tdata-id=\"${this.crew.seats[6].id}\" \n\t\t\t\t\tdata-name=\"${this.crew.seats[6].name}\"\n\t\t\t\t\tdata-novice=\"${this.crew.seats[6].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\tdata-age-group=\"${this.crew.seats[6].ageGroup}\n\t\t\t\t\tdata-gender=\"${this.crew.seats[6].gender}\"\n\t\t\t\t\t`: ``}>\n\t\t\t\t\t${this.crew.seats[6] ? `${this.crew.seats[6].name}` : ``}\n\t\t\t\t</div>\n\t\t\t\t`: ``} \n\n\t\t\t\t${(this.size == 2 || this.size == 4 || this.size == 8) && this.coxed ? `\n\t\t\t\t\t<div \n\t\t\t\t\t${!!this.crew.seats[this.size - 1] ? `\n\t\t\t\t\t\tdata-id=\"${this.crew.seats[this.size - 1].id}\" \n\t\t\t\t\t\tdata-name=\"${this.crew.seats[this.size - 1].name}\"\n\t\t\t\t\t\tdata-novice=\"${this.crew.seats[this.size - 1].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\t\tdata-age-group=\"${this.crew.seats[this.size - 1].ageGroup}\n\t\t\t\t\t\tdata-gender=\"${this.crew.seats[this.size - 1].gender}\"\n\t\t\t\t\t` : ``}>\n\t\t\t\t\t${this.crew.seats[this.size - 1] ? `${this.crew.seats[this.size - 1].name}` : ``}\n\t\t\t\t</div>\n\n\t\t\t\t` : ``}\n\n\t\t\t\t${(this.coxed) ? `\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t${!!this.crew.seats[this.size] ? `\n\t\t\t\t\t\tdata-id=\"${this.crew.seats[this.size].id}\" \n\t\t\t\t\t\tdata-name=\"${this.crew.seats[this.size].name}\"\n\t\t\t\t\t\tdata-novice=\"${this.crew.seats[this.size].novice ? \"true\" : \"false\"}\"\n\t\t\t\t\t\tdata-age-group=\"${this.crew.seats[this.size].ageGroup}\n\t\t\t\t\t\tdata-gender=\"${this.crew.seats[this.size].gender}\"\n\t\t\t\t\t` : ``}>\n\t\t\t\t\t${this.crew.seats[this.size] ? `${this.crew.seats[this.size].name}` : ``}\n\t\t\t\t</div>`: ``}\n\n\n\t\t\t\t${this.coxed ? `<div class=\"separator\"> - </div>\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t` : ``}\n\t\t\t\t</div>\n\n\t\t`;\n\n\t\treturn this.mainElement;\n\t}\n}","import { CrewDisplayItem } from \"./components/CrewDisplayItem\";\nimport { CrewEditorSerialised } from \"./components/CrewEditorItem\";\n\nclass CrewDisplay {\n\tmainPoint: HTMLElement;\n\titems: CrewDisplayItem[] = [];\n\tcrews: CrewEditorSerialised[];\n\n\tconstructor(querySelector: string) {\n\t\ttry {\n\t\t\tthis.mainPoint = document.querySelector(querySelector)!;\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"Crew Display: Unable to find master element for page\");\n\t\t}\n\n\t\twindow.addEventListener(\"storage\", () => {\n\t\t\tthis.loadCrews();\n\t\t\tthis.renderCrews();\n\t\t\tconsole.log(\"updated\", JSON.parse(atob(window.localStorage.getItem(\"crews\"))));\n\t\t});\n\n\t\tthis.loadCrews();\n\t\tthis.renderCrews();\n\n\t\tconsole.info(\"Crew Display: Initialised Successfuly\");\n\t}\n\n\tprivate loadCrews() {\n\t\ttry {\n\t\t\tif (JSON.parse(atob(window.localStorage.getItem(\"crews\"))) as CrewEditorSerialised[] == [] || JSON.parse(atob(window.localStorage.getItem(\"crews\"))) as CrewEditorSerialised[] == undefined || JSON.parse(atob(window.localStorage.getItem(\"crews\"))) as CrewEditorSerialised[] == null) return;\n\t\t} catch (e) {\n\t\t\t// console.error(e);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.crews = JSON.parse(atob(window.localStorage.getItem(\"crews\"))) as CrewEditorSerialised[];\n\n\t}\n\n\tprivate renderCrews() {\n\n\t\t// console.log(\"RENDER CREW DISPLAY\")\n\n\t\tthis.items = [];\n\t\tthis.mainPoint.innerHTML = `<div class=\"container\"></div>`;\n\t\tlet container = this.mainPoint.querySelector(\".container\");\n\n\t\ttry {\n\t\t\tthis.crews.forEach((val: CrewEditorSerialised) => {\n\t\t\t\tthis.items.push(new CrewDisplayItem(val));\n\t\t\t});\n\t\t} catch (e) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.items.forEach((val: CrewDisplayItem) => {\n\t\t\tcontainer.appendChild(val.render());\n\t\t});\n\t}\n\n}\n\nexport { CrewDisplay }","import { MemberEditor } from './member-editor';\nimport { CrewEditor } from './crew-editor';\nimport { CrewDisplay } from './crew-display';\n\ninterface Route {\n\tpath: string | RegExp;\n\tcallback: Function;\n}\n\ntype RouterMode = 'hash' | 'history';\n\ninterface RouterOptions {\n\tmode: RouterMode;\n\troot: string;\n}\n\nclass Router {\n\t/**\n\t * \tRoutes Array, valid routes are here, can be regexp or a string\n\t *\n\t */\n\troutes: Route[] = [];\n\n\t/**\n\t * Holds the mode of the router\n\t *\n\t */\n\tmode: RouterMode = 'hash';\n\n\t/**\n\t * Root URL, change if this is in a sub-page\n\t *\n\t */\n\troot: string = '/';\n\n\t/**\n\t * holds the handle on the interval as a number\n\t */\n\tglobalInterval: number | undefined;\n\n\t/**\n\t * Holds the Current path in memory\n\t */\n\tcurrent: string = '';\n\n\t/**\n\t * Initialises the Router Object\n\t */\n\tconstructor(options: RouterOptions, routes: Route[]) {\n\t\t// this.mode = window.history.pushState ? \"history\" : \"hash\";\n\t\tif (options.mode) this.mode = options.mode;\n\t\tif (options.root) this.root = options.root;\n\t\tif (routes) this.routes = routes;\n\t\tthis.listen();\n\t}\n\n\t/**\n\t * Add a route to the instance\n\t */\n\tadd = (path: string | RegExp, callback: Function) => {\n\t\tthis.routes.push({ path, callback });\n\t\treturn this;\n\t};\n\n\t/**\n\t * remove a path from the instance by name or regexp\n\t */\n\tremove = (path: string | RegExp) => {\n\t\tfor (let i = 0; i < this.routes.length; i += 1) {\n\t\t\tif (this.routes[i].path === path) {\n\t\t\t\tthis.routes.slice(i, 1);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Clear Routes\n\t */\n\tflush = () => {\n\t\tthis.routes = [];\n\t\treturn this;\n\t};\n\n\t/**\n\t * Removes Slashes from the path\n\t * This is an internal parser function\n\t */\n\tclearSlashes = (path: string) =>\n\t\tpath.toString().replace(/\\/$/, '').replace(/^\\//, '');\n\n\t/**\n\t * get URL fragment, (the \"about\" or  \"\")\n\t */\n\tgetFragment = (): string => {\n\t\tlet fragment = '';\n\t\tif (this.mode === 'history') {\n\t\t\tfragment = this.clearSlashes(\n\t\t\t\tdecodeURI(window.location.pathname + window.location.search)\n\t\t\t);\n\t\t\tfragment = fragment.replace(/\\?(.*)$/, '');\n\t\t\tfragment =\n\t\t\t\tthis.root !== '/' ? fragment.replace(this.root, '') : fragment;\n\t\t} else {\n\t\t\tconst match = window.location.href.match(/#(.*)$/);\n\t\t\tfragment = match ? match[1] : '';\n\t\t}\n\t\treturn this.clearSlashes(fragment);\n\t};\n\n\t/**\n\t * Change Page\n\t */\n\tnavigate = (path = '') => {\n\t\tif (this.mode === 'history') {\n\t\t\twindow.history.pushState(\n\t\t\t\tnull,\n\t\t\t\t'',\n\t\t\t\tthis.root + this.clearSlashes(path)\n\t\t\t);\n\t\t} else {\n\t\t\twindow.location.href = `${window.location.href.replace(\n\t\t\t\t/#(.*)$/,\n\t\t\t\t''\n\t\t\t)}#${path}`;\n\t\t}\n\t\tthis.current == path;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Listen for changes to URL to navigate between pages by URL change\n\t */\n\tlisten = () => {\n\t\tclearInterval(this.globalInterval);\n\t\t// @ts-ignore\n\t\tthis.globalInterval = setInterval(this.interval, 50);\n\t};\n\n\t/**\n\t * Used by listen to actually do its job.\n\t */\n\tinterval = () => {\n\t\tif (this.current === this.getFragment()) return;\n\t\tthis.current = this.getFragment();\n\n\t\tthis.routes.some((route) => {\n\t\t\tconst match = this.current.match(route.path);\n\t\t\tif (match) {\n\t\t\t\tmatch.shift();\n\t\t\t\troute.callback.apply({}, match);\n\t\t\t\treturn match;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t};\n}\n\n/**\n * Navigate between pages\n */\nfunction navigateClass(\n\tpathClass: string,\n\twrapper: HTMLElement,\n\tindicator: HTMLElement,\n\tupdateCallback?: Function\n) {\n\t// const pagesById = [\n\t// \tdocument.querySelector(\"#crew-display\"),\n\t// \tdocument.querySelector(\"#crew-editor\"),\n\t// \tdocument.querySelector(\"#member-editor\")\n\t// ];\n\n\tif (pathClass == activeRouteClass) return;\n\n\twrapper.classList.remove('member-editor', 'crew-editor', 'crew-display');\n\tindicator.classList.remove('member-editor', 'crew-editor', 'crew-display');\n\n\twrapper.classList.add(pathClass);\n\tindicator.classList.add(pathClass);\n\n\tactiveRouteClass = pathClass;\n\n\t// pagesById.forEach((val) => {\n\t// \tconsole.info(val);\n\t// \tif (val.id != pathClass) {\n\t// \t\tval.classList.add(\"hidden\");\n\t// \t} else if (val.id == pathClass) {\n\t// \t\tval.classList.remove(\"hidden\");\n\t// \t}\n\t// });\n\n\tif (!!updateCallback) {\n\t\tupdateCallback();\n\t}\n}\n\nvar activeRouteClass: string, router: Router;\n\nvar memberEditor: MemberEditor;\nvar crewEditor: CrewEditor;\nvar crewDisplay: CrewDisplay;\n\n/**\n * Initialises everything,\n * in a brittish way tho\n */\nconst innit = (): void => {\n\tvar main: HTMLElement, indicator: HTMLElement;\n\t// if (!('import' in document.createElement('link'))) {\n\t// \tconsole.warn(\"HTML IMPORT NOT ENABLED\");\n\t// }\n\n\t// window.onstorage = (() => { console.info(window.localStorage) });\n\n\ttry {\n\t\tmain = document.querySelector('main.wrapper')!;\n\t\tindicator = document.querySelector('span#indicator')!;\n\n\t\tif (main == null || indicator == null) {\n\t\t\tthrow new Error('Good Job Retard');\n\t\t}\n\t} catch (error: any) {\n\t\t// insult me, the only person using this code for being retarded and not setting up the DOM properly\n\t\tconsole.error(\n\t\t\t'You did it wrong, your IQ is: ' + Math.floor(Math.random() * -100)\n\t\t);\n\t\tconsole.error({ error });\n\t\t// also prevents anything from working\n\t\treturn;\n\t}\n\n\ttry {\n\t\tmemberEditor = new MemberEditor('.page#member-editor');\n\t\tcrewEditor = new CrewEditor('.page#crew-editor');\n\t\tcrewDisplay = new CrewDisplay('.page#crew-display');\n\t} catch (error) {\n\t\tconsole.error('An Error Occured', error);\n\t}\n\n\t// create router instance\n\trouter = new Router({ mode: 'hash', root: '/' }, [\n\t\t{\n\t\t\tpath: 'member-editor',\n\t\t\tcallback: () => navigateClass('member-editor', main, indicator),\n\t\t},\n\t\t{\n\t\t\tpath: 'crew-editor',\n\t\t\tcallback: () => navigateClass('crew-editor', main, indicator),\n\t\t},\n\t\t{\n\t\t\tpath: 'crew-display',\n\t\t\tcallback: () => navigateClass('crew-display', main, indicator),\n\t\t},\n\t\t{\n\t\t\tpath: '',\n\t\t\tcallback: () => navigateClass('member-editor', main, indicator),\n\t\t},\n\t]);\n\n\t// if (!('ontouchstart' in document.documentElement)) {\n\t// \t// Quality of Life Feature\n\t// \t// also technically an advanced feature\n\t// \t// allows page switching in tabs with arrow keys\n\t// \twindow.onkeydown = (ev: KeyboardEvent) => {\n\t// \t\tswitch (ev.key) {\n\t// \t\t\tcase \"ArrowLeft\":\n\t// \t\t\t\tif (router.current == 'member-editor') break;\n\t// \t\t\t\telse if (router.current == 'crew-editor') router.navigate('member-editor');\n\t// \t\t\t\telse if (router.current == 'crew-display') router.navigate('crew-editor');\n\t// \t\t\t\telse break;\n\t// \t\t\t\tbreak;\n\t// \t\t\tcase \"ArrowRight\":\n\t// \t\t\t\tif (router.current == 'member-editor') router.navigate('crew-editor');\n\t// \t\t\t\telse if (router.current == 'crew-editor') router.navigate('crew-display');\n\t// \t\t\t\telse if (router.current == 'crew-display') break;\n\t// \t\t\t\telse break;\n\t// \t\t\t\tbreak;\n\t// \t\t\tdefault:\n\t// \t\t\t\tbreak\n\t// \t\t}\n\t// \t}\n\t// }\n};\n\n/**\n * Starting Point of javascript program\n */\ndocument.addEventListener('DOMContentLoaded', innit);\n\n// ████████╗██╗░░██╗██╗░██████╗  ██╗░██████╗  ██████╗░░█████╗░██████╗░  ██████╗░██╗░░░██╗████████╗\n// ╚══██╔══╝██║░░██║██║██╔════╝  ██║██╔════╝  ██╔══██╗██╔══██╗██╔══██╗  ██╔══██╗██║░░░██║╚══██╔══╝\n// ░░░██║░░░███████║██║╚█████╗░  ██║╚█████╗░  ██████╦╝███████║██║░░██║  ██████╦╝██║░░░██║░░░██║░░░\n// ░░░██║░░░██╔══██║██║░╚═══██╗  ██║░╚═══██╗  ██╔══██╗██╔══██║██║░░██║  ██╔══██╗██║░░░██║░░░██║░░░\n// ░░░██║░░░██║░░██║██║██████╔╝  ██║██████╔╝  ██████╦╝██║░░██║██████╔╝  ██████╦╝╚██████╔╝░░░██║░░░\n// ░░░╚═╝░░░╚═╝░░╚═╝╚═╝╚═════╝░  ╚═╝╚═════╝░  ╚═════╝░╚═╝░░╚═╝╚═════╝░  ╚═════╝░░╚═════╝░░░░╚═╝░░░\n\n// ██╗████████╗  ░██╗░░░░░░░██╗░█████╗░██████╗░██╗░░██╗░██████╗\n// ██║╚══██╔══╝  ░██║░░██╗░░██║██╔══██╗██╔══██╗██║░██╔╝██╔════╝\n// ██║░░░██║░░░  ░╚██╗████╗██╔╝██║░░██║██████╔╝█████═╝░╚█████╗░\n// ██║░░░██║░░░  ░░████╔═████║░██║░░██║██╔══██╗██╔═██╗░░╚═══██╗\n// ██║░░░██║░░░  ░░╚██╔╝░╚██╔╝░╚█████╔╝██║░░██║██║░╚██╗██████╔╝\n// ╚═╝░░░╚═╝░░░  ░░░╚═╝░░░╚═╝░░░╚════╝░╚═╝░░╚═╝╚═╝░░╚═╝╚═════╝░\n\n// ░██████╗██╗░░░██╗██████╗░██████╗░██████╗░██╗░██████╗██╗███╗░░██╗░██████╗░██╗░░░░░██╗░░░██╗\n// ██╔════╝██║░░░██║██╔══██╗██╔══██╗██╔══██╗██║██╔════╝██║████╗░██║██╔════╝░██║░░░░░╚██╗░██╔╝\n// ╚█████╗░██║░░░██║██████╔╝██████╔╝██████╔╝██║╚█████╗░██║██╔██╗██║██║░░██╗░██║░░░░░░╚████╔╝░\n// ░╚═══██╗██║░░░██║██╔══██╗██╔═══╝░██╔══██╗██║░╚═══██╗██║██║╚████║██║░░╚██╗██║░░░░░░░╚██╔╝░░\n// ██████╔╝╚██████╔╝██║░░██║██║░░░░░██║░░██║██║██████╔╝██║██║░╚███║╚██████╔╝███████╗░░░██║░░░\n// ╚═════╝░░╚═════╝░╚═╝░░╚═╝╚═╝░░░░░╚═╝░░╚═╝╚═╝╚═════╝░╚═╝╚═╝░░╚══╝░╚═════╝░╚══════╝░░░╚═╝░░░\n\n// ░██╗░░░░░░░██╗███████╗██╗░░░░░██╗░░░░░\n// ░██║░░██╗░░██║██╔════╝██║░░░░░██║░░░░░\n// ░╚██╗████╗██╔╝█████╗░░██║░░░░░██║░░░░░\n// ░░████╔═████║░██╔══╝░░██║░░░░░██║░░░░░\n// ░░╚██╔╝░╚██╔╝░███████╗███████╗███████╗\n// ░░░╚═╝░░░╚═╝░░╚══════╝╚══════╝╚══════╝\n\n//  i spent 20 minutes on that getting that in, no regrets\n\n// 17:29:15 - File change detected. Starting incremental compilation...\n// [0]\n// [0]\n// [0] 17:29:15 - Found 0 errors.Watching for file changes.\n\n// - Compiler, i guess\n"]}